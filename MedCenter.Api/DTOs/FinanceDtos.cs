// هذا الملف يحتوي على كائنات نقل البيانات (DTOs) الخاصة بالعمليات المالية داخل النظام
// ويغطي ثلاث عمليات رئيسية: إنشاء فاتورة جديدة، إضافة عناصر الفاتورة، وتسجيل دفعة مالية.
// تُستخدم هذه الـ DTOs بين واجهة المستخدم (Frontend) وواجهة البرمجة (API) ضمن وحدة المحاسبة وإدارة الإيرادات.

using MedCenter.Api.Models;

namespace MedCenter.Api.DTOs
{
    // -------------------------------
    // DTO لإنشاء فاتورة جديدة (Invoice)
    // -------------------------------
    public record InvoiceCreateDto(
        long CenterId,                          // رقم المركز الطبي الذي تصدر منه الفاتورة
        long PatientId,                         // معرف المريض الذي تخصه الفاتورة
        Guid? DoctorId,                         // الطبيب الذي قدّم الخدمة (اختياري — في حال كانت الفاتورة عامة للمركز)
        string CurrencyCode,                    // رمز العملة (مثل: "USD" أو "SAR" أو "ILS")
        IEnumerable<InvoiceItemCreateDto> Items // قائمة العناصر (الإجراءات أو الخدمات) التي تحتويها الفاتورة
    );

    // ---------------------------------
    // DTO لإنشاء عنصر داخل الفاتورة (Invoice Item)
    // ---------------------------------
    public record InvoiceItemCreateDto(
        long? TreatmentId,   // المعرف المرتبط بالإجراء الطبي المنفذ (اختياري)
        long? ProcedureId,   // المعرف المرجعي للإجراء من دليل الإجراءات (اختياري)
        string Description,  // وصف العنصر (مثلاً: "حشوة سن أمامي" أو "تحاليل مخبرية شاملة")
        int Qty,             // الكمية (عدد الوحدات أو الجلسات)
        decimal UnitPrice,   // سعر الوحدة الواحدة
        decimal? Discount    // الخصم على هذا العنصر (اختياري)
    );

    // -------------------------------
    // DTO لتسجيل دفعة مالية (Payment)
    // -------------------------------
    public record PaymentCreateDto(
        long InvoiceId,           // معرف الفاتورة التي تم تسديدها
        DateTime PaymentDate,     // تاريخ ووقت عملية الدفع
        decimal Amount,           // المبلغ المدفوع في هذه العملية
        PaymentMethod Method,     // طريقة الدفع (نقدي، بطاقة، تحويل، إلخ)
        string? Notes             // ملاحظات إضافية حول الدفعة (اختياري — مثل "دفعة أولى" أو "خصم إداري")
    );
}